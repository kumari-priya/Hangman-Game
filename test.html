<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <link href="https://fonts.googleapis.com/css?family=Nosifer" rel="stylesheet">
<link href="assets/css/style.css" rel="stylesheet">
</head>
<body>

<div class="container">
  <div class="jumbotron ">
    <h1 class="display-3 header-text ">Hangman</h1>
    <p class="lead">Jungle!!</p>
  </div>
  <div class="row">
  <div class="col-md-1"></div>
  <div class="col-md-10">
    <div class="alert alert-success" role="alert" id="success-div">
      You Won!!
      <p>Press any key to play again</p>
    </div>
    <div class="alert alert-danger" role="alert" id="danger-div">
      You Lost!
      <p>Press any key to play again</p>
    </div>
    <div class="alert alert-dark" role="alert" id="info-div">

</div>
  </div>
  <div class="col-md-1"></div>
</div>

  <div class="row">
  <div class="col-md-1"></div>
  <div class="col-md-5">
    <div class="panel panel-default">
      <div class="panel-body">Image</div>
    </div>
  </div>
  <div class="col-md-5">
    <div class="panel panel-default">
      <div class="panel-body">

        <table class="table">
    <tbody>
      <tr>
        <td>Wins</td>
        <td class="btn btn-success"><span id="win"><strong>0</strong></span></td>
      </tr>
      <tr>
        <td>Loss</td>
        <td class="btn btn-danger"><span id="loss"><strong>0</strong></span></td>
      </tr>
      <tr>
        <td>Current word</td>
        <td><span id="randomWord"><strong></strong></span></td>
      </tr>
      <tr>
        <td>Number of gusses remaining</td>
        <td><span id="life"><strong>0</strong></span></td>
      </tr>
      <tr>
        <td>Letters already gussed</td>
        <td><span id="guessedLetters"><strong></strong></span></td>
      </tr>
    </tbody>
  </table>

        <!-- <p>Wins  <span id="win"><strong>0</strong></span></p>
        <p>Losses  <span id="loss"><strong>0</strong></span></p>
        <p>Current word  <span id="randomWord"><strong></strong></span></p>
        <p>Number of gusses remaining  <span id="life"><strong>0</strong></span></p>
        <p>Letters already gussed  <span id="guessedLetters"><strong></strong></span></p></div> -->

    </div>

  </div>
  <div class="col-md-1">
  </div>
  </div>
</div>
<script>

    // Creates an array that lists out all of the options (Rock, Paper, or Scissors).
    var words = ["red","green","blue","pink"];
    var word =""
    var userGuess;
    var guessedLetter;


    //Declare variables for win loss draw
    var win = 0;
    var loss = 0;
    var life = 10;
    var reset = false;
    function hideStatusDiv(){
      document.getElementById("success-div").style.display = "none";
      document.getElementById("danger-div").style.display = "none";
      document.getElementById("info-div").style.display = "none";
    }

function getRandom(list)
{
  return (list[Math.floor(Math.random() * list.length)]);
}

function generateSpace(id)
{
var maskedText = document.getElementById(id);
word = getRandom(words);
maskedText.textContent = "";
for (var i = 0; i < word.length; i++) {
  maskedText.textContent  += "_";
  console.log(word);
  console.log(maskedText.textContent);
  console.log(maskedText.textContent.length);
}
  document.getElementById('guessedLetters').textContent = "";
}

function resetGame(word, guessedWord)
{
  hideStatusDiv();
  if(word == guessedWord){
    win++;
    document.getElementById('win').textContent = win;
    //show success status message
    document.getElementById("success-div").style.display = "block";
    reset = true;
  }
  else{
    loss++;
      document.getElementById('loss').textContent = loss;
      //show danger status message
      document.getElementById("danger-div").style.display = "block";
      reset = true;
  }
  if(reset == false)
  {
    generateSpace('randomWord');
    document.getElementById('guessedLetters').textContent = "";
    console.log("inside reset false" +document.getElementById('guessedLetters').textContent );
     life = 10;
     reset = true;
  }
}

function setCharAt(str,index,chr) {
    if(index > str.length-1) return str;
    return str.substr(0,index) + chr + str.substr(index+1);
}
function setCharAtZero(str,index,chr) {
      return chr + str.substr(1,str.length-1);
}


function updateDOM(userGuess,word)
{
  if(life > 0)
  {
  var tempString = document.getElementById('randomWord').textContent;
  console.log("Masked Text" + tempString);
  console.log("Word "+word);
    if((word.indexOf(userGuess) >= 0) && (tempString.indexOf(userGuess) < 0))
    {
      for (var i = 0; i < word.length; i++) {
        if(word.charAt(i) == userGuess){
          if(i==0){
          tempString = setCharAtZero(tempString,i,userGuess);
          }
          else{
            tempString = setCharAt(tempString,i,userGuess);
          }
          document.getElementById('randomWord').textContent = tempString;
        }
      }
      if(word == tempString){
          resetGame(word,tempString);
      }
    }

// Update guessedLetter every time new letter is pressed
var guessString = document.getElementById('guessedLetters');
if(guessString.textContent.indexOf(userGuess)< 0)
{
  if(guessString.textContent.length > 0){
    guessString.textContent += ", "+ userGuess;
  }
  else{
    guessString.textContent =  userGuess;
  }

}

    //Update life
    life--;
    document.getElementById('life').textContent = life;
  }
  else {
    resetGame(word,document.getElementById('randomWord').textContent);
  }
}

//This function will run once when page is loaded
window.onload = function(event)
{
  generateSpace('randomWord');
  document.getElementById('life').textContent = life;
  document.getElementById('win').textContent = win;
  document.getElementById('loss').textContent = loss;
  //hide all status message
  hideStatusDiv();
  //show info status message
  document.getElementById("info-div").style.display = "block";

}

    // This function is run whenever the user presses a key.
document.onkeyup = function(event) {
  if(reset == true)
  {
    generateSpace('randomWord');

    life = 10;
    document.getElementById('life').textContent = 10;
    //hide all status message
    hideStatusDiv();
    //show info status message
    document.getElementById("info-div").style.display = "block";
    reset = false;
  }
  else{
    console.log("reset true;")
    var userGuess = event.key;
    updateDOM(userGuess,word);
  }};


</script>
</body>
</html>
